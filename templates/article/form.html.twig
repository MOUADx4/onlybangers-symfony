{% extends 'base.html.twig' %}

{% block title %}
    {% if form.vars.value.id %}
        Modifier l'article
    {% else %}
        Nouvel article
    {% endif %}
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>
        {% if form.vars.value.id %}
            Modifier l'article
        {% else %}
            Nouvel article
        {% endif %}
    </h1>

    {# Messages flash succès #}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

    {{ form_start(form, {'attr': {'class': 'mt-3'}}) }}

        <div class="mb-3">
            {{ form_label(form.title) }}
            {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.title) }}
        </div>

        <div class="mb-3">
            {{ form_label(form.content) }}
            {{ form_widget(form.content, {'attr': {'class': 'form-control', 'rows': 8}}) }}
            {{ form_errors(form.content) }}
        </div>

        <button type="submit" class="btn btn-primary">
            {% if form.vars.value.id %}Mettre à jour{% else %}Publier{% endif %}
        </button>

    {{ form_end(form) }}

    <a href="{{ path('admin_articles_list') }}" class="btn btn-link mt-3">← Retour à la liste des articles</a>
</div>
{% endblock %}
